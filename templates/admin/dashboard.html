{% extends "admin/base.html" %}
{% block content %}
<h1>Admin Dashboard</h1>

<h2>Products</h2>
<a href="{{ url_for('admin.add_product') }}">Add New Product</a>
<table>
  <tr>
    <th>Name</th>
    <th>Price</th>
    <th>Actions</th>
  </tr>
  {% for product in products %}
  <tr>
    <td>{{ product.name }}</td>
    <td>${{ product.price }}</td>
    <td>
      <a href="{{ url_for('admin.edit_product', product_id=product.id) }}">Edit</a>
      <form action="{{ url_for('admin.delete_product', product_id=product.id) }}" method="POST" style="display:inline">
        <button type="submit">Delete</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>

<h2>Orders</h2>
<table>
  <tr>
    <th>Order #</th>
    <th>User</th>
    <th>Status</th>
    <th>Delivery</th>
    <th>Actions</th>
  </tr>
  {% for order in orders %}
  <tr>
    <td>{{ order.id }}</td>
    <td>{{ order.user.username }}</td>
    <td>{{ order.status }}</td>
    <td>{{ order.delivery_status }}</td>
    <td>
      <a href="{{ url_for('admin.view_order', order_id=order.id) }}">View</a>
      {% if order.status != 'Processed' %}
        <a href="{{ url_for('admin.process_order', order_id=order.id) }}">Process</a>
      {% endif %}
      {% if order.delivery_status != 'Delivered' %}
        <a href="{{ url_for('admin.deliver_order', order_id=order.id) }}">Deliver</a>
      {% endif %}
    </td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
